---
import { getCollection } from "astro:content";
import Layout from "@layouts/Layout.astro";
import Container from "@components/container.astro";
import { Image } from "astro:assets";
import heroImage from "assets/hero-no-shadow.png";
import ParticleButton from "@components/ui/ParticleButton.astro";

const allJobs = await getCollection("jobs");
---

<Layout title="Careers">
  <div class="relative overflow-hidden">
    <div class="gradient-mesh"></div>
    <Container>
      <!-- Hero Section -->
      <div class="grid lg:grid-cols-2 gap-8 items-center pt-16 pb-8">
        <div>
          <h1 class="text-gradient-animation text-5xl lg:text-6xl xl:text-7xl font-bold lg:tracking-tight xl:tracking-tighter">
            Join Our Mission
          </h1>
          <p class="text-lg mt-4 text-slate-600 max-w-xl shimmer">
            Help us transform the way people experience and interact with physical spaces.
          </p>
          <div class="mt-6 flex flex-col sm:flex-row gap-3">
            <ParticleButton href="#opportunities" class="button-gradient">
              Explore Job Opportunities
            </ParticleButton>
          </div>
        </div>
        <div class="relative group">
          <div class="gradient-hover"></div>
          <div class="glass-card p-2">
            <Image
              src={heroImage}
              alt="Team collaboration"
              class="w-full rounded-md shadow-lg hover-scale"
              width={500}
              height={500}
            />
          </div>
          <div class="gradient-glow"></div>
        </div>
      </div>

      <!-- Job Opportunities Section -->
      <div id="opportunities" class="py-16">
        <h2 class="text-3xl font-bold mb-8 gradient-text">Open Positions</h2>
        <div class="grid gap-6">
          {allJobs.map((job) => (
            <a href={`/careers/${job.slug}`} class="group relative">
              <div class="gradient-hover"></div>
              <div class="glass-card p-6">
                <div class="flex justify-between items-start">
                  <div>
                    <h3 class="text-xl font-semibold gradient-text">
                      {job.data.title}
                    </h3>
                    <p class="text-slate-600 mt-1">
                      {job.data.department} · {job.data.location} · {job.data.type}
                    </p>
                  </div>
                  <span class="text-blue-600 group-hover:translate-x-2 transition-transform duration-200 gradient-text">
                    →
                  </span>
                </div>
                <p class="mt-4 text-slate-600">
                  {job.data.summary}
                </p>
              </div>
              <div class="gradient-glow"></div>
            </a>
          ))}
        </div>
      </div>
    </Container>
  </div>
</Layout>
